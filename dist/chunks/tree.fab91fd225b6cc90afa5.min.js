(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{HByN:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},i=t("q1tI"),r=(a=i)&&a.__esModule?a:{default:a},c=t("8C91");const l=[{uid:"480304799460360192",ctype:"SYSGROUP",name:"DBAdm",children:[{uid:"480304799577800704",ctype:"SYSROLE",name:"dbAdm",children:[{uid:"601730029373620224",ctype:"SYSUSER",name:"321321",key:"603538512070836225"},{uid:"601718608543875072",ctype:"SYSUSER",name:"dfds",key:"601723989903015936"}]}],key:"480304799460360192",project:!1},{uid:"480304801788198912",ctype:"SYSGROUP",name:"Group Administrator",children:[],key:"480304801788198912",project:!1},{uid:"605767120373940224",ctype:"SYSGROUP",name:"newTestGroup",children:[{uid:"603538432966262784",ctype:"SYSROLE",name:"3ffdsfdsfdsfsd",children:[],key:"605767840351387650"},{uid:"605767351123574784",ctype:"SYSROLE",name:"newTestRole",children:[{uid:"601045261866762240",ctype:"SYSUSER",name:"33",key:"605767880067252225"}],key:"605767351257792512"}],key:"605767120373940224",project:!0},{uid:"565097735242383360",ctype:"SYSGROUP",name:"phone",children:[{uid:"565099531453071360",ctype:"SYSROLE",name:"Phone Administration",children:[{uid:"605763558424182784",ctype:"SYSUSER",name:"newUser",key:"605764034347663360"}],key:"565099588927619072"}],key:"565097735242383360",project:!0},{uid:"480304801662369794",ctype:"SYSGROUP",name:"Project Administration",children:[{uid:"480304801733672960",ctype:"SYSROLE",name:"Project Administrator",children:[],key:"480304801750450176"}],key:"480304801662369794",project:!1},{uid:"480304801029029888",ctype:"SYSGROUP",name:"System Administrator",children:[{uid:"480304801058390016",ctype:"SYSROLE",name:"System Administrator",children:[{uid:"605767609467535360",ctype:"SYSUSER",name:"newTestUser",key:"606217650812485634"}]}],key:"480304801029029888",project:!1},{uid:"499885286558269440",ctype:"SYSGROUP",name:"Workflow Administrator",children:[{uid:"499884769648050176",ctype:"SYSROLE",name:"Workflow Administrator",children:[],key:"606135540038762496"}],key:"499885286558269440",project:!1},{uid:"601358319604465664",ctype:"SYSGROUP",name:"事业部",children:[{uid:"601366797798604800",ctype:"SYSROLE",name:"通用事业部",children:[{uid:"601718129214619648",ctype:"SYSUSER",name:"323",key:"605440948813430785"},{uid:"565099722033856512",ctype:"SYSUSER",name:"markwang3",key:"605441043122356226"}],key:"601366797798604801"},{uid:"567369391847505920",ctype:"SYSGROUP",name:"重载事业部",children:[{uid:"601417884354215936",ctype:"SYSROLE",name:"3r3",children:[{uid:"601722995852967936",ctype:"SYSUSER",name:"wang1",key:"601723066107559938"}],key:"601417884354215937"},{uid:"601726313677455360",ctype:"SYSROLE",name:"rwqrwq",children:[{uid:"601045261866762240",ctype:"SYSUSER",name:"33",key:"605440985056411649"}],key:"601726313744564224"}],key:"567369391847505920",project:!0}],key:"601358319604465664",project:!0}],S=[{ctype:"SYSROLE",key:"0-0-0",name:"dbAdm",uid:"480304799577800704"},{ctype:"SYSROLE",key:"0-2-0",name:"3ffdsfdsfdsfsd",uid:"603538432966262784"},{ctype:"SYSROLE",key:"0-2-1",name:"newTestRole",uid:"605767351123574784"},{ctype:"SYSROLE",key:"0-3-0",name:"Phone Administration",uid:"565099531453071360"},{ctype:"SYSROLE",key:"0-4-0",name:"Project Administrator",uid:"480304801733672960"},{ctype:"SYSROLE",key:"0-5-0",name:"System Administrator",uid:"480304801058390016"},{ctype:"SYSROLE",key:"0-6-0",name:"Workflow Administrator",uid:"499884769648050176"},{ctype:"SYSROLE",key:"0-7-0",name:"通用事业部",uid:"601366797798604800"},{ctype:"SYSROLE",key:"0-7-1-0",name:"3r3",uid:"601417884354215936"},{ctype:"SYSROLE",key:"0-7-1-1",name:"rwqrwq",uid:"601726313677455360"}];n.default=class extends r.default.Component{constructor(...e){var n;return n=super(...e),this.state={dataSource:[]},this.Copy=(()=>{var e=document.getElementsByTagName("pre")[0].innerText,n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),alert("复制成功")}),this.mapDefaultValue=(e=>{let n=[];return e.forEach(e=>{let t=[];for(let n in e)t.push(e[n]);n.push(t)}),n}),this.mapDataSource=((e,n)=>(n=n||0,e.map((e,t)=>d({},e,{key:n+"-"+t,name:e.name||e.objectName,children:e.children?this.mapDataSource(e.children,n+"-"+t):null})))),this.loopUntilRole=((e,n)=>{e.forEach((e,t)=>{if("SYSROLE"==e.ctype){let t={ctype:e.ctype,key:e.key,name:e.name,uid:e.uid};n.some(n=>n.uid==e.uid)||n.push(t)}e.children&&e.children.length&&this.loopUntilRole(e.children,n)})}),n}componentDidMount(){}render(){return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{style:{height:"500px"}},r.default.createElement(c.DyTree,{onSelect:e=>{console.log(e)},dataSource:this.mapDataSource(l),fleidName:{title:"name",value:"uid",key:"key"},defaultValue:["480304799460360192","480304801788198912","480304799577800704"],nodeStyle:{color:"#004669"}})),r.default.createElement("div",{style:{height:"500px"}},r.default.createElement(c.DyTree,{onSelect:e=>{console.log(e)},singleSelecter:!0,dataSource:S,fleidName:{title:"name",value:"uid",key:"key"},defaultValue:["603538432966262784"],nodeStyle:{color:"#004669"}})),r.default.createElement("div",{className:"codePlace"},r.default.createElement("pre",{dangerouslySetInnerHTML:{__html:toShow('\n    import React from \'react\';\n    import ReactDOM from \'react-dom\';\n    import { DyButton } from "@dy.design";\n    const data = [\n        {\n          uid: "480304799460360192",\n          ctype: "SYSGROUP",\n          name: "DBAdm",\n          children: [\n            {\n              uid: "480304799577800704",\n              ctype: "SYSROLE",\n              name: "dbAdm",\n              children: [\n                {\n                  uid: "601730029373620224",\n                  ctype: "SYSUSER",\n                  name: "321321",\n                  key: "603538512070836225"\n                },\n                {\n                  uid: "601718608543875072",\n                  ctype: "SYSUSER",\n                  name: "dfds",\n                  key: "601723989903015936"\n                }\n              ]\n            }\n          ],\n          key: "480304799460360192",\n          project: false\n        },\n        {\n          uid: "480304801788198912",\n          ctype: "SYSGROUP",\n          name: "Group Administrator",\n          children: [],\n          key: "480304801788198912",\n          project: false\n        },\n        {\n          uid: "605767120373940224",\n          ctype: "SYSGROUP",\n          name: "newTestGroup",\n          children: [\n            {\n              uid: "603538432966262784",\n              ctype: "SYSROLE",\n              name: "3ffdsfdsfdsfsd",\n              children: [],\n              key: "605767840351387650"\n            },\n            {\n              uid: "605767351123574784",\n              ctype: "SYSROLE",\n              name: "newTestRole",\n              children: [\n                {\n                  uid: "601045261866762240",\n                  ctype: "SYSUSER",\n                  name: "33",\n                  key: "605767880067252225"\n                }\n              ],\n              key: "605767351257792512"\n            }\n          ],\n          key: "605767120373940224",\n          project: true\n        },\n        {\n          uid: "565097735242383360",\n          ctype: "SYSGROUP",\n          name: "phone",\n          children: [\n            {\n              uid: "565099531453071360",\n              ctype: "SYSROLE",\n              name: "Phone Administration",\n              children: [\n                {\n                  uid: "605763558424182784",\n                  ctype: "SYSUSER",\n                  name: "newUser",\n                  key: "605764034347663360"\n                }\n              ],\n              key: "565099588927619072"\n            }\n          ],\n          key: "565097735242383360",\n          project: true\n        },\n        {\n          uid: "480304801662369794",\n          ctype: "SYSGROUP",\n          name: "Project Administration",\n          children: [\n            {\n              uid: "480304801733672960",\n              ctype: "SYSROLE",\n              name: "Project Administrator",\n              children: [],\n              key: "480304801750450176"\n            }\n          ],\n          key: "480304801662369794",\n          project: false\n        },\n        {\n          uid: "480304801029029888",\n          ctype: "SYSGROUP",\n          name: "System Administrator",\n          children: [\n            {\n              uid: "480304801058390016",\n              ctype: "SYSROLE",\n              name: "System Administrator",\n              children: [\n                {\n                  uid: "605767609467535360",\n                  ctype: "SYSUSER",\n                  name: "newTestUser",\n                  key: "606217650812485634"\n                }\n              ]\n            }\n          ],\n          key: "480304801029029888",\n          project: false\n        },\n        {\n          uid: "499885286558269440",\n          ctype: "SYSGROUP",\n          name: "Workflow Administrator",\n          children: [\n            {\n              uid: "499884769648050176",\n              ctype: "SYSROLE",\n              name: "Workflow Administrator",\n              children: [],\n              key: "606135540038762496"\n            }\n          ],\n          key: "499885286558269440",\n          project: false\n        },\n        {\n          uid: "601358319604465664",\n          ctype: "SYSGROUP",\n          name: "事业部",\n          children: [\n            {\n              uid: "601366797798604800",\n              ctype: "SYSROLE",\n              name: "通用事业部",\n              children: [\n                {\n                  uid: "601718129214619648",\n                  ctype: "SYSUSER",\n                  name: "323",\n                  key: "605440948813430785"\n                },\n                {\n                  uid: "565099722033856512",\n                  ctype: "SYSUSER",\n                  name: "markwang3",\n                  key: "605441043122356226"\n                }\n              ],\n              key: "601366797798604801"\n            },\n            {\n              uid: "567369391847505920",\n              ctype: "SYSGROUP",\n              name: "重载事业部",\n              children: [\n                {\n                  uid: "601417884354215936",\n                  ctype: "SYSROLE",\n                  name: "3r3",\n                  children: [\n                    {\n                      uid: "601722995852967936",\n                      ctype: "SYSUSER",\n                      name: "wang1",\n                      key: "601723066107559938"\n                    }\n                  ],\n                  key: "601417884354215937"\n                },\n                {\n                  uid: "601726313677455360",\n                  ctype: "SYSROLE",\n                  name: "rwqrwq",\n                  children: [\n                    {\n                      uid: "601045261866762240",\n                      ctype: "SYSUSER",\n                      name: "33",\n                      key: "605440985056411649"\n                    }\n                  ],\n                  key: "601726313744564224"\n                }\n              ],\n              key: "567369391847505920",\n              project: true\n            }\n          ],\n          key: "601358319604465664",\n          project: true\n        }\n      ];\n      \n\n\nconst roleData = [\n    { ctype: "SYSROLE", key: "0-0-0", name: "dbAdm", uid: "480304799577800704" },\n    {\n      ctype: "SYSROLE",\n      key: "0-2-0",\n      name: "3ffdsfdsfdsfsd",\n      uid: "603538432966262784"\n    },\n    {\n      ctype: "SYSROLE",\n      key: "0-2-1",\n      name: "newTestRole",\n      uid: "605767351123574784"\n    },\n    {\n      ctype: "SYSROLE",\n      key: "0-3-0",\n      name: "Phone Administration",\n      uid: "565099531453071360"\n    },\n    {\n      ctype: "SYSROLE",\n      key: "0-4-0",\n      name: "Project Administrator",\n      uid: "480304801733672960"\n    },\n    {\n      ctype: "SYSROLE",\n      key: "0-5-0",\n      name: "System Administrator",\n      uid: "480304801058390016"\n    },\n    {\n      ctype: "SYSROLE",\n      key: "0-6-0",\n      name: "Workflow Administrator",\n      uid: "499884769648050176"\n    },\n    {\n      ctype: "SYSROLE",\n      key: "0-7-0",\n      name: "通用事业部",\n      uid: "601366797798604800"\n    },\n    { ctype: "SYSROLE", key: "0-7-1-0", name: "3r3", uid: "601417884354215936" },\n    {\n      ctype: "SYSROLE",\n      key: "0-7-1-1",\n      name: "rwqrwq",\n      uid: "601726313677455360"\n    }\n  ];\n\n    class Tree extends React.PureComponent {\n       \n\n        /**\n         * @name:\n         * @test:\n         * @msg: 遍历初始值\n         * @param {data:人员组织结构数据, index}\n         * @return: [[groupid, roleid, useid],[groupid, roleid, useid],[groupid, roleid, useid]]\n         */\n        mapDefaultValue = initTargets => {\n          let defaultValue = [];\n      \n          initTargets.forEach(v => {\n            let newArray = [];\n            for (let x in v) {\n              newArray.push(v[x]);\n            }\n            defaultValue.push(newArray);\n          });\n          return defaultValue;\n        };\n      \n        /**\n         * @name:\n         * @test:\n         * @msg: 加入’0-1 0-0-1‘规则类型的key到数据\n         * @param {data:人员组织结构数据, index}\n         * @return: data with key\n         */\n        mapDataSource = (data, index) => {\n          index = index || 0;\n          return data.map((d, i) => ({\n            ...d,\n            key: index + "-" + i,\n            name: d.name || d.objectName,\n            children: d.children\n              ? this.mapDataSource(d.children, index + "-" + i)\n              : null\n          }));\n        };\n\n        render(){\n            return       <React.Fragment>\n                                <div style={{ height: "500px" }}>\n                                <DyTree\n                                    onSelect={value => {\n                                    console.log(value);\n                        \n                                    //   this.setState({ targetData: value });\n                                    //   this.props.onChange(value);\n                                    }}\n                                    dataSource={this.mapDataSource(data)}\n                                    fleidName={{ title: "name", value: "uid", key: "key" }}\n                                    defaultValue={[\n                                    "480304799460360192",\n                                    "480304801788198912",\n                                    "480304799577800704"\n                                    ]}\n                                    nodeStyle={{ color: "#004669" }}\n                                />\n                                </div>\n                        \n                                <div style={{ height: "500px" }}>\n                                <DyTree\n                                    onSelect={value => {\n                                    console.log(value);\n                        \n                                    //   this.setState({ targetData: value });\n                                    //   this.props.onChange(value);\n                                    }}\n                                    singleSelecter\n                                    dataSource={roleData}\n                                    fleidName={{ title: "name", value: "uid", key: "key" }}\n                                    defaultValue={["603538432966262784"]}\n                                    nodeStyle={{ color: "#004669" }}\n                                />\n                                </div>\n                            </React.Fragment>\n        }\n    }\n\n    ReactDOM.render(<Tree />, DomNode);\n            ')}}),r.default.createElement("button",{onClick:()=>this.Copy()},"复制")),r.default.createElement("div",{style:{margin:"10px"}},"参数说明："),r.default.createElement("div",{className:"desc"},"onSelect: 选中事件"),r.default.createElement("div",{className:"desc"},"dataSource: 参照我们的组织结构数据"),r.default.createElement("div",{className:"desc"},"fleidName: 指定数据的字段名称"),r.default.createElement("div",{className:"desc"},"defaultValue: 初始默认值"),r.default.createElement("div",{className:"desc"},"singleSelecter: 如果数据只有一层 且需要单选 传入这个参数 类型： boolean"))}}}}]);